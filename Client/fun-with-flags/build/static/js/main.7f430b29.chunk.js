(this["webpackJsonpfun-with-flags"]=this["webpackJsonpfun-with-flags"]||[]).push([[0],{109:function(e,t,r){e.exports={container:"MainAppWrapper_container__A5QOs"}},117:function(e,t,r){e.exports={invalid:"authInput_invalid__1aOfY"}},118:function(e,t,r){e.exports={answerCard:"answerCard_answerCard__3adA3"}},119:function(e,t,r){e.exports={disabledBtn:"resultScreen_disabledBtn__1acpC"}},126:function(e,t,r){},127:function(e,t,r){},189:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),s=r(25),o=r.n(s),i=(r(126),r(2)),c=r(8),u=r(9),l=r(11),h=r(10),d=(r(127),r(128),r(191)),p=r(109),f=r.n(p),j=r(1),g=function(e){Object(l.a)(r,e);var t=Object(h.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"render",value:function(){return Object(j.jsx)("div",{className:f.a.container,children:this.props.children})}}]),r}(a.Component),b=g,m=r(198),O=r(196),v=r(23),x=r(110),y=r(113),C=r(21),_=r.n(C),S=function(e){return Object(j.jsx)("div",{className:_.a.mainNav,children:Object(j.jsx)(m.a,{bg:"dark",variant:"dark",children:Object(j.jsxs)(d.a,{children:[Object(j.jsx)(m.a.Brand,{children:"FunWithFlags"}),Object(j.jsxs)(O.a,{className:_.a.navButtons,children:[Object(j.jsx)(v.b,{className:_.a.navLink,to:"/",exact:!0,activeClassName:_.a.activeNavLink,children:"Flagpedia"}),Object(j.jsx)(v.b,{className:_.a.navLink,to:"/quiz",activeClassName:_.a.activeNavLink,children:"Flagquiz"}),e.isAuth?Object(j.jsx)(v.b,{className:_.a.navLink,to:"/user-info",activeClassName:_.a.activeNavLink,children:"User Info"}):null,Object(j.jsx)(v.b,{className:_.a.navLink,to:"/auth",activeClassName:_.a.activeNavLink,onClick:function(){e.isAuth&&e.authHandler()},children:e.isAuth?"Log Out":"Log in"})]}),Object(j.jsx)(v.b,{className:[_.a.navLink,_.a.mobileNavBtn].join(" "),activeClassName:_.a.activeNavLink,to:"",onClick:function(t){return function(t){t.preventDefault(),e.toggleMobileNav()}(t)},children:Object(j.jsx)(x.a,{icon:y.a,size:"2x"})})]})})})},w=r(71),A=r.n(w),k=function(e){var t=Object(j.jsxs)("div",{className:A.a.mobileNav,children:[Object(j.jsx)("h3",{children:"FunWithFlags"}),["/","/quiz","/user-info","/auth"].map((function(t,r){var a="Flagpedia";switch(t){case"/quiz":a="Flagquiz";break;case"/user-info":a="User Info";break;case"/auth":a=e.isAuth?"Log Out":"Log in"}return"/user-info"!==t||e.isAuth?Object(j.jsx)(v.b,{to:t,exact:!0,activeClassName:A.a.activeNavBtn,onClick:function(){return r=e.isAuth&&"/auth"===t,e.toggleMobileNav(),void(r&&e.authHandler());var r},children:Object(j.jsx)("div",{className:A.a.navBtn,children:a})},r):null}))]});return e.show?t:null},N=function(e){var t=Object(j.jsx)("div",{style:{position:"absolute",zIndex:"1079",height:"100%",width:"100%",background:"rgba(0,0,0,0.5)"},onClick:e.onBackdropClick});return e.show?t:null},z=r(116),I=r(197),T=r(192),E=r(193),M=r(194),q=r(72),U=r.n(q),R=r(199),B=function(e){return Object(j.jsx)("div",{children:Object(j.jsxs)(R.a,{style:{margin:"auto"},children:[Object(j.jsx)(R.a.Img,{variant:"top",src:e.flagUrl,style:{borderBottom:"solid 1px #d9d9d9"}}),Object(j.jsxs)(R.a.Body,{children:[Object(j.jsx)(R.a.Title,{children:e.name}),Object(j.jsxs)(R.a.Text,{children:["Capital: ",e.capital]})]})]})})},H=r(13),F=r(115),L=r.n(F);console.log("production");var P=L.a.create({baseURL:""}),Q="WAIT_FOR_FLAG_RESULT",D="HANDLE_FLAG_RESULT",G="HANDLE_FLAG_ERROR",V="AUTH_SUCCESS",Z="AUTH_FAIL",W="AUTH_WAIT_FOR_RESULT",K="AUTH_LOGOUT",Y="AUTH_SWITCH_TYPE",J="AUTH_UPDATE_USER_INFO",X="QUIZ_GOTO_START_SCREEN",$="QUIZ_FETCH_FAIL",ee="QUIZ_ANSWER_CHOSEN",te="QUIZ_START_GAME",re="QUIZ_QUESTION_BEGIN",ae="QUIZ_UPDATE_PROGRESS_BAR",ne="QUIZ_WAIT_FOR_ASYNC_RESULT",se="QUIZ_SUBMIT_SCORE_SUCCESS",oe="QUIZ_SUBMIT_SCORE_FAIL",ie="QUIZ_CLOSE_CONGRATULATION_MODAL",ce="QUIZ_FETCH_SCORE_RECORD_SUCESS",ue="QUIZ_FETCH_SCORE_RECORD_FAIL",le="QUIZ_WAIT_FOR_SCORE_RECORDS_RESULT",he=function(e){return function(t){t(de()),P.get("/api/countries/country",{params:{name:e}}).then((function(e){var r=e.data.name,a=e.data.url,n=e.data.capital;t(pe(r,n,a))})).catch((function(e){console.log(e.response);var r="Unidentified Error!";e.response&&(r=e.response.data.message),t(fe(r))}))}},de=function(){return{type:Q}},pe=function(e,t,r){return{type:D,name:e,capital:t,url:r}},fe=function(e){return{type:G,message:e}},je=function(e){Object(l.a)(r,e);var t=Object(h.a)(r);function r(){var e;Object(c.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={searchString:""},e.inputChangeHandler=function(t){var r=t.target.value;e.setState((function(e){return Object(i.a)(Object(i.a)({},e),{},{searchString:r})}))},e.onClickHandler=function(){var t=e.state.searchString;if(""===e.state.searchString.trim()){if(""===e.props.usercountry)return;t=e.props.usercountry}e.props.getFlagResult(t)},e}return Object(u.a)(r,[{key:"render",value:function(){var e=this,t=Object(j.jsx)(B,{name:this.props.name,flagUrl:this.props.flagUrl,capital:this.props.capital}),r=Object(j.jsx)(z.a,{lg:{span:4,offset:4},md:{span:6,offset:3},sm:{span:8,offset:2},xs:{span:8,offset:2},className:["mt-2",U.a.errorCol].join(" "),children:Object(j.jsx)(I.a.Text,{style:{color:"#fff"},children:this.props.errorMessage})});return Object(j.jsxs)("div",{children:[this.props.isAuth?Object(j.jsxs)("h1",{className:U.a.greeting,children:['Hello "',this.props.username,'" from ',this.props.usercountry," "]}):null,Object(j.jsxs)(T.a,{children:[Object(j.jsx)(z.a,{lg:{span:4,offset:4},md:{span:6,offset:3},sm:{span:8,offset:2},xs:{span:8,offset:2},children:Object(j.jsxs)(I.a,{className:U.a.flagsForm,onSubmit:function(e){return e.preventDefault()},children:[Object(j.jsx)(I.a.Group,{className:"mb-3",children:Object(j.jsx)(I.a.Control,{type:"text",placeholder:"Enter country name here",onChange:function(t){return e.inputChangeHandler(t)}})}),Object(j.jsx)(E.a,{variant:"primary",onClick:function(){return e.onClickHandler()},children:"Get the flag!"})]})}),this.props.error?r:null,Object(j.jsx)(z.a,{lg:{span:4,offset:4},md:{span:6,offset:3},sm:{span:8,offset:2},xs:{span:8,offset:2},className:"mt-5",style:{textAlign:"center"},children:this.props.loading?Object(j.jsx)(M.a,{animation:"border",variant:"primary"}):t})]})]})}}]),r}(a.Component),ge=Object(H.b)((function(e){return Object(i.a)(Object(i.a)({},e.flagpedia),{},{isAuth:e.auth.isAuth,username:e.auth.username,usercountry:e.auth.usercountry})}),(function(e){return{getFlagResult:function(t){return e(he(t))}}}))(je),be=r(117),me=r.n(be),Oe=function(e){return Object(j.jsx)(z.a,{lg:{span:10,offset:1},md:{span:10,offset:1},sm:{span:10,offset:1},xs:{span:10,offset:1},children:Object(j.jsxs)(I.a.Group,{className:"mb-3",children:[Object(j.jsx)(I.a.Label,{children:e.label}),Object(j.jsx)(I.a.Control,{type:e.type,onChange:e.onChangeHandler,className:e.isValid?"":me.a.invalid,value:e.currentValue})]})})},ve=["Afghanistan","Albania","Algeria","Andorra","Angola","Antigua and Barbuda","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Brazil","Brunei","Bulgaria","Burkina Faso","Burma","Burundi","Cambodia","Cameroon","Canada","Cape Verde","Central African Republic","Chad","Chile","China","Colombia","Comoros","Democratic Republic of the Congo","Republic of the Congo","Costa Rica","C\xf4te d'Ivoire","Croatia","Cuba","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","East Timor","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Ethiopia","Fiji","Finland","France","Gabon","The Gambia","Georgia","Germany","Ghana","Greece","Grenada","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Honduras","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","North Korea","South Korea","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macedonia","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritania","Mauritius","Mexico","Federated States of Micronesia","Moldova","Monaco","Mongolia","Montenegro","Morocco","Mozambique","Namibia","Nauru","Nepal","Netherlands","New Zealand","Nicaragua","Niger","Nigeria","Norway","Oman","Pakistan","Palau","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Romania","Russia","Rwanda","Saint Kitts And Nevis","Saint Lucia","Saint Vincent and the Grenadines","Samoa","San Marino","S\xe3o Tom\xe9 and Pr\xedncipe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Swaziland","Sweden","Switzerland","Syria","Tajikistan","Tanzania","Thailand","Togo","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","Uruguay","Uzbekistan","Vanuatu","Venezuela","Vietnam","Yemen","Zambia","Zimbabwe"],xe=function(e){var t=ve.sort(),r=e.priorCountry?e.priorCountry:"Vietnam";return(t=t.filter((function(e){return e!==r}))).unshift(r),Object(j.jsx)(z.a,{lg:{span:10,offset:1},md:{span:10,offset:1},sm:{span:10,offset:1},xs:{span:10,offset:1},children:Object(j.jsxs)(I.a.Group,{className:"mb-3",children:[Object(j.jsx)(I.a.Label,{children:" Your Country "}),Object(j.jsx)(I.a.Select,{onChange:e.onChangeHandler,children:t.map((function(e,t){return Object(j.jsx)("option",{value:e,children:e},t)}))})]})})},ye=r(58),Ce=r.n(ye),_e=function(e){return e.length>=5},Se=function(e){for(var t in e){var r=e[t];if(void 0!==r.touched){if(!r.isValid&&r.required)return!1;if(!r.isValid&&!r.required&&""!==r.value.trim())return!1}}return!0},we=function(e){return{type:Z,message:e}},Ae=function(e,t,r){return{type:V,username:e,country:t,token:r}},ke=function(){return{type:W}},Ne=function(){return localStorage.removeItem("username"),localStorage.removeItem("country"),localStorage.removeItem("token"),localStorage.removeItem("expiresIn"),{type:K}},ze=r(14),Ie=function(e){Object(l.a)(r,e);var t=Object(h.a)(r);function r(){var e;Object(c.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={formControl:{username:{value:"",required:!0,touched:!1,isValid:!1},password:{value:"",required:!0,touched:!1,isValid:!1},country:{value:"Vietnam"}},formIsValid:!1,formIsTouched:!1},e}return Object(u.a)(r,[{key:"changeHandler",value:function(e,t){var r=t,a=e.target.value;"username"===r||"password"===r?this.setState((function(e){var t=Object(i.a)({},e);return t.formControl[r].value=a,t.formControl[r].touched=!0,t.formControl[r].isValid=_e(a),t.formIsValid=Se(t.formControl),t.formIsTouched=!0,t})):"country"===r&&this.setState((function(e){var t=Object(i.a)({},e);return t.formControl.country.value=a,t.formIsTouched=!0,t}))}},{key:"submitHandler",value:function(){var e=this.props.authType,t=this.state.formControl.username.value,r=this.state.formControl.password.value,a=this.state.formControl.country.value;this.props.authStart(e,t,r,a)}},{key:"componentDidMount",value:function(){this.props.isAuth&&this.props.history.push("/")}},{key:"componentDidUpdate",value:function(){this.props.isAuth&&this.props.history.push("/")}},{key:"render",value:function(){var e=this,t=this.state.formIsValid&&this.state.formIsTouched,r=!this.state.formIsValid&&this.state.formIsTouched,a=Object(j.jsx)("p",{style:{color:"red"},children:"Username and Password must have at least 5 characters."}),n=Object(j.jsx)("p",{style:{color:"red"},children:this.props.authErrorMessage}),s=Object(j.jsx)(M.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}),o=this.props.hasAuthError;return Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{className:Ce.a.greeting,children:"Sign in to have more fun with FunWithFlags"}),Object(j.jsx)(T.a,{children:Object(j.jsx)(z.a,{lg:{span:4,offset:4},md:{span:6,offset:3},sm:{span:8,offset:2},xs:{span:10,offset:1},children:Object(j.jsx)(I.a,{className:Ce.a.authForm,children:Object(j.jsxs)(T.a,{children:[["username","password"].map((function(t,r){return Object(j.jsx)(Oe,{label:t.charAt(0).toUpperCase()+t.slice(1),type:t,onChangeHandler:function(r){return e.changeHandler(r,t)},isValid:e.state.formControl[t].isValid&&e.state.formControl[t].touched||!e.state.formControl[t].touched},r)})),"login"===this.props.authType?null:Object(j.jsx)(xe,{onChangeHandler:function(t){return e.changeHandler(t,"country")}}),Object(j.jsxs)(z.a,{lg:{span:10,offset:1},md:{span:10,offset:1},sm:{span:10,offset:1},xs:{span:10,offset:1},className:[Ce.a.errCol,"mt-2","mb-2"].join(" "),children:[r?a:null,o?n:null]}),Object(j.jsxs)(z.a,{lg:{span:10,offset:1},md:{span:10,offset:1},sm:{span:10,offset:1},xs:{span:10,offset:1},className:[Ce.a.btnCol,"mt-3"].join(" "),children:[Object(j.jsxs)(E.a,{variant:"primary",disabled:!t||this.props.loading,onClick:function(){return e.submitHandler()},style:{marginBottom:"10px"},children:["login"===this.props.authType?"Sign in":"Sign up",this.props.loading?" ... ":null,this.props.loading?s:null]}),Object(j.jsxs)(E.a,{variant:"primary",onClick:function(){return e.props.switchAuthType()},style:{marginBottom:"10px"},children:["Switch to ","login"===this.props.authType?"Sign up":"Sign in"]})]})]})})})})]})}}]),r}(a.Component),Te=Object(H.b)((function(e){return{hasAuthError:e.auth.hasError,authErrorMessage:e.auth.errorMessage,isAuth:e.auth.isAuth,loading:e.auth.loading,authType:e.auth.authType}}),(function(e){return{authStart:function(t,r,a,n){return e(function(e,t,r,a){return function(n){n(ke());var s="/api/auth/".concat(e),o={username:t,password:r},c=Object(i.a)(Object(i.a)({},o),{},{country:a}),u="login"===e?o:c;P.post(s,u).then((function(e){var t=e.data.username,r=e.data.token,a=e.data.country.name,s=e.data.country.capital,o=e.data.country.flagUrl;localStorage.setItem("username",t),localStorage.setItem("country",a),localStorage.setItem("token",r),localStorage.setItem("expiresIn","".concat((new Date).getTime()+36e5)),n(pe(a,s,o)),n(Ae(t,a,r)),setTimeout((function(){return n(Ne())}),36e5)})).catch((function(e){var t="Unidentified Error!";e.response&&(t=e.response.data.message),n(we(t))}))}}(t,r,a,n))},switchAuthType:function(){return e({type:Y})}}}))(Object(ze.f)(Ie)),Ee=r(195),Me=function(e){return Object(j.jsxs)(Ee.a,{show:e.show,centered:!0,children:[Object(j.jsx)(Ee.a.Header,{children:Object(j.jsx)(Ee.a.Title,{children:"Sign in to have more fun"})}),Object(j.jsx)(Ee.a.Body,{children:"Sign in to have the chance to get your name in the Hall of Fame"}),Object(j.jsxs)(Ee.a.Footer,{children:[Object(j.jsx)(E.a,{variant:"secondary",onClick:e.onOfferReject,children:"Nah, just want to look around"}),Object(j.jsx)(E.a,{variant:"primary",onClick:e.onOfferAgree,children:"Sign me in"})]})]})},qe=r(200),Ue=function(){return{type:ne}},Re=function(e){return function(t){t(He(e)),setTimeout((function(){return t(Fe(!1))}),1e4),setInterval((function(){return t(Pe())}),100)}},Be=function(e){return{type:$,message:e}},He=function(e){return{type:te,quizzes:e}},Fe=function(e){return{type:ee,result:e}},Le=function(){return{type:re}},Pe=function(){return{type:ae}},Qe=function(){return{type:se}},De=function(e){return{type:oe,message:e}},Ge=function(){return function(e){e({type:le}),P.get("/api/game/scores").then((function(t){var r=t.data;e(Ve(r))})).catch((function(t){console.log(t.response);var r="Unidentified Error!";t.response&&(r=t.response.data.message),e(Ze(r))}))}},Ve=function(e){return{type:ce,records:e}},Ze=function(e){return{type:ue,message:e}},We=r(118),Ke=r.n(We),Ye=function(e){Object(l.a)(r,e);var t=Object(h.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"onClickHandler",value:function(e){var t=e===this.props.rightAnswerIndex;this.props.scrollUpRef&&this.props.scrollUpRef.current.scrollIntoView({behavior:"smooth"}),this.props.answerChosen(t)}},{key:"render",value:function(){var e=this;return Object(j.jsx)(z.a,{lg:6,md:6,sm:12,xs:12,children:Object(j.jsxs)(R.a,{className:Ke.a.answerCard,onClick:function(){return e.onClickHandler(e.props.index)},children:["COUNTRY_TO_FLAG"===this.props.questionType?Object(j.jsx)(R.a.Img,{src:this.props.answer}):Object(j.jsx)(R.a.Body,{children:Object(j.jsx)(R.a.Text,{children:this.props.answer})}),Object(j.jsx)(R.a.Body,{children:Object(j.jsx)(R.a.Title,{children:["A","B","C","D"][this.props.index]})})]})})}}]),r}(a.Component),Je=Object(H.b)((function(e){return{rightAnswerIndex:e.flagquiz.quizzes[e.flagquiz.currentQuizIndex].rightAnswerIndex}}),(function(e){return{answerChosen:function(t){return e(Fe(t))}}}))(Ye),Xe=r(73),$e=r.n(Xe),et=function(e){Object(l.a)(r,e);var t=Object(h.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"render",value:function(){var e=this,t=this.props.quiz.questionType,r=this.props.quiz.answerArray;return Object(j.jsxs)("div",{children:[Object(j.jsxs)("h4",{className:$e.a.quizQuestion,children:["Question ",this.props.quizNumber,": ",this.props.quiz.question]}),"FLAG_TO_COUNTRY"===t?Object(j.jsx)("img",{src:this.props.quiz.questionUrl,className:$e.a.questionImg,alt:"Error loading pic!"}):null,Object(j.jsx)(qe.a,{className:$e.a.progressBar,now:this.props.progressBarPercentage}),Object(j.jsx)(T.a,{children:r.map((function(r,a){return Object(j.jsx)(Je,{index:a,answer:r,questionType:t,scrollUpRef:e.props.scrollUpRef},a)}))})]})}}]),r}(a.Component),tt=Object(H.b)((function(e){return{quiz:e.flagquiz.quizzes[e.flagquiz.currentQuizIndex],quizNumber:e.flagquiz.currentQuizIndex+1,progressBarPercentage:e.flagquiz.progressBar}}))(et),rt=function(e){return Object(j.jsxs)(Ee.a,{centered:!0,show:e.show,children:[Object(j.jsx)(Ee.a.Header,{children:Object(j.jsx)(Ee.a.Title,{children:"Congratulation!"})}),Object(j.jsx)(Ee.a.Body,{children:"Your name is now amongst the best competitors \ud83d\udd25\ud83d\udd25\ud83d\udd25"}),Object(j.jsx)(Ee.a.Footer,{children:Object(j.jsx)(E.a,{variant:"primary",onClick:e.onCloseModal,children:"Okay"})})]})},at=r(119),nt=r.n(at),st=function(e){Object(l.a)(r,e);var t=Object(h.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"render",value:function(){var e,t=this,r=this.props.result?"\ud83d\udd25Congrats, you picked the right answer.\ud83d\udd25":"\ud83c\udf27\ufe0f Good luck next time \ud83c\udf27\ufe0f, the correct answer is: ",a=this.props.quiz.rightAnswerIndex,n=this.props.quiz.answerArray[a];e="COUNTRY_TO_FLAG"===this.props.quiz.questionType?Object(j.jsx)("img",{src:n,alt:"Loading pic failed!",style:{border:"1px solid #000",margin:"20px 0",maxWidth:"80%"}}):Object(j.jsx)("h1",{children:n});var s=Object(j.jsx)(E.a,{onClick:function(){return t.props.moveToNextQuestion()},children:"Next question"}),o=Object(j.jsx)(M.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),i=Object(j.jsxs)(E.a,{disabled:!this.props.isAuth||this.props.loading,className:this.props.isAuth?"":nt.a.disabledBtn,onClick:function(){return t.props.submitScore(t.props.score,t.props.authToken)},style:{marginBottom:"10px"},children:[this.props.loading?"Submitting ... ":"Submit your score!",this.props.loading?o:null]}),c=Object(j.jsxs)("div",{children:[Object(j.jsx)(E.a,{variant:"success",onClick:function(){return t.props.startNewGame()},style:{marginBottom:"10px"},children:"New Game"}),this.props.scoreSubmitted?null:i]});return Object(j.jsxs)("div",{children:[Object(j.jsx)(rt,{show:this.props.showModal,onCloseModal:function(){return t.props.closeModal()}}),Object(j.jsx)("h3",{children:r}),this.props.result?null:e,Object(j.jsxs)("h3",{style:{margin:"50px 0"},children:["You now have ",this.props.score,"/",this.props.maxScore," ",this.props.score>1?"points":"point","."]}),this.props.hasError?Object(j.jsx)("p",{style:{color:"red",margin:"10px 0"},children:this.props.errorMessage}):null,this.props.currentQuizIndex+1!==this.props.maxScore?s:c,this.props.currentQuizIndex+1===this.props.maxScore?Object(j.jsx)("h3",{style:{marginTop:"20px"},children:"\ud83d\udd25Congratulation, you finished the Flagquiz.\ud83d\udd25"}):null]})}}]),r}(a.Component),ot=Object(H.b)((function(e){return{result:e.flagquiz.lastResult,score:e.flagquiz.score,maxScore:e.flagquiz.quizzes.length,quiz:e.flagquiz.quizzes[e.flagquiz.currentQuizIndex],currentQuizIndex:e.flagquiz.currentQuizIndex,scoreSubmitted:e.flagquiz.scoreSubmitted,hasError:e.flagquiz.screenHasError,errorMessage:e.flagquiz.errorMessage,showModal:e.flagquiz.showCongratulation,loading:e.flagquiz.loading,isAuth:e.auth.isAuth,authToken:e.auth.token}}),(function(e){return{moveToNextQuestion:function(){return e((function(e){e(Le()),setTimeout((function(){return e(Fe(!1))}),1e4),setInterval((function(){return e(Pe())}),100)}))},startNewGame:function(){return e({type:X})},submitScore:function(t,r){return e(function(e,t){return function(r){r(Ue()),P({url:"/api/game/scores",headers:{Authorization:"Baerer ".concat(t)},method:"POST",data:{score:e}}).then((function(e){r(Qe())})).catch((function(e){console.log(e.response);var t="Unidentified Error!";e.response&&(t=e.response.data.message),r(De(t))}))}}(t,r))},closeModal:function(){return e({type:ie})}}}))(st),it=r(74),ct=r.n(it),ut=function(e){Object(l.a)(r,e);var t=Object(h.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"render",value:function(){var e=this,t=Object(j.jsx)(tt,{scrollUpRef:this.props.scrollUpRef}),r=Object(j.jsx)("div",{className:ct.a.alignWrapper,children:Object(j.jsx)(ot,{})}),a=this.props.loading?Object(j.jsx)(M.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}):null,n=Object(j.jsxs)("div",{className:ct.a.alignWrapper,children:[Object(j.jsx)("h1",{style:{marginBottom:"50px"},children:"Give Flagquiz a try? \ud83e\udd14"}),Object(j.jsxs)(E.a,{onClick:function(){return e.props.fetchQuizzes()},disabled:this.props.loading,children:[this.props.loading?"Fetching quizzes ... ":"Start Flagquiz!",a]}),this.props.hasError?Object(j.jsx)("p",{style:{color:"red",margin:"10px 0"},children:this.props.errorMessage}):null]});return Object(j.jsx)(z.a,{lg:{span:7,offset:1},md:{span:7,offset:1},sm:{span:10,offset:1},xs:{span:10,offset:1},style:{marginBottom:"20px"},children:Object(j.jsxs)("div",{className:ct.a.gameSection,children:[this.props.gameOn?null:n,this.props.gameOn&&!this.props.gamePause?t:null,this.props.gameOn&&this.props.gamePause?r:null]})})}}]),r}(a.Component),lt=Object(H.b)((function(e){return{gameOn:e.flagquiz.gameOn,gamePause:e.flagquiz.gamePause,loading:e.flagquiz.loading,hasError:e.flagquiz.screenHasError,errorMessage:e.flagquiz.errorMessage}}),(function(e){return{fetchQuizzes:function(){return e((function(e){e(Ue()),P.get("/api/game/quizzes").then((function(t){var r=t.data;e(Re(r))})).catch((function(t){console.log(t.response);var r="Unidentified Error!";t.response&&(r=t.response.data.message),e(Be(r))}))}))}}}))(ut),ht=r(85),dt=r.n(ht),pt=r(43),ft=r.n(pt),jt=function(e){Object(l.a)(r,e);var t=Object(h.a)(r);function r(e){var a;return Object(c.a)(this,r),(a=t.call(this,e)).setState({socket:null,scoreRecords:[]}),a}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=this,t=dt()();t.on("halloffame",(function(t){e.props.updateScoreRecords(t)})),this.setState({socket:t}),this.props.fetchScoreRecords()}},{key:"componentWillUnmount",value:function(){this.state.socket&&this.state.socket.disconnect()}},{key:"render",value:function(){var e=Object(j.jsx)(M.a,{animation:"border",size:"lg",variant:"primary"}),t=this.props.records.map((function(e,t){var r="";switch(t){case 0:r="\ud83d\udd25\ud83d\udc51\ud83d\udd25";break;case 1:r="\ud83d\udd25\ud83d\udd25";break;case 2:r="\ud83d\udd25"}return Object(j.jsxs)("div",{className:ft.a.record,children:[Object(j.jsxs)("span",{className:[ft.a.nameSpan,ft.a.recordDetail].join(" "),children:[t+1,".",r," ",Object(j.jsx)("p",{children:e.username})]}),Object(j.jsx)("span",{className:[ft.a.scoreSpan,ft.a.recordDetail].join(" "),children:Object(j.jsx)("p",{children:e.score})})]},t)}));return Object(j.jsx)(z.a,{lg:{span:3,offset:0},md:{span:3,offset:0},sm:{span:10,offset:1},xs:{span:10,offset:1},children:Object(j.jsxs)("div",{className:ft.a.hallOfFame,children:[Object(j.jsx)("h3",{children:"Hall Of Fame"}),this.props.loading?e:t,0!==this.props.records.length||this.props.hasError?null:Object(j.jsx)("h6",{children:"Seems like there is no one here yet. It's your chance to be the first one to set foot in the \ud83d\udd25Hall of Fame\ud83d\udd25"}),this.props.hasError?Object(j.jsx)("p",{style:{color:"red"},children:this.props.errorMessage}):null]})})}}]),r}(a.Component),gt=Object(H.b)((function(e){return{records:e.flagquiz.records,loading:e.flagquiz.recordsLoading,hasError:e.flagquiz.recordsHasError,errorMessage:e.flagquiz.recordsErrorMessage}}),(function(e){return{fetchScoreRecords:function(){return e(Ge())},updateScoreRecords:function(t){return e(Ve(t))}}}))(jt),bt=function(e){Object(l.a)(r,e);var t=Object(h.a)(r);function r(){var e;Object(c.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={showModal:!1},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){this.props.isAuth||this.setState({showModal:!0}),this.scrollUpRef=Object(a.createRef)()}},{key:"componentDidUpdate",value:function(){this.props.isAuth&&this.state.showModal&&this.setState({showModal:!1})}},{key:"closeModal",value:function(){this.setState({showModal:!1})}},{key:"redirectToAuthPage",value:function(){this.props.history.push("/auth")}},{key:"render",value:function(){var e=this;return Object(j.jsxs)("div",{children:[Object(j.jsx)(Me,{show:this.state.showModal,onOfferAgree:function(){return e.redirectToAuthPage()},onOfferReject:function(){return e.closeModal()}}),Object(j.jsxs)(T.a,{children:[Object(j.jsx)("div",{style:{height:"10px"},ref:this.scrollUpRef}),Object(j.jsx)(lt,{scrollUpRef:this.scrollUpRef}),Object(j.jsx)(gt,{})]})]})}}]),r}(a.Component),mt=Object(H.b)((function(e){return{isAuth:e.auth.isAuth}}))(Object(ze.f)(bt)),Ot=r(86),vt=r.n(Ot),xt=function(e){Object(l.a)(r,e);var t=Object(h.a)(r);function r(e){var a;return Object(c.a)(this,r),(a=t.call(this,e)).state={formControl:{newPassword:{value:"",touched:!1,isValid:!1,required:!1},password:{value:"",touched:!1,isValid:!1,required:!0},country:{value:""}},formIsValid:!1,formIsTouched:!1,loading:!1,hasError:!1,errorMessage:"",showModal:!1},a}return Object(u.a)(r,[{key:"changeHandler",value:function(e,t){var r=t,a=e.target.value;this.state.hasError&&this.setState({hasError:!1}),"newPassword"===r||"password"===r?this.setState((function(e){var t=Object(i.a)({},e);return t.formControl[r].value=a,t.formControl[r].touched=!0,t.formControl[r].isValid=_e(a),t.formIsValid=Se(t.formControl),t.formIsTouched=!0,t})):"country"===r&&this.setState((function(e){var t=Object(i.a)({},e);return t.formControl.country.value=a,t.formIsTouched=!0,t}))}},{key:"submitHandler",value:function(){var e=this;this.setState({hasError:!1,loading:!0});var t=this.state.formControl.password.value,r=this.state.formControl.newPassword.value,a=this.state.formControl.country.value,n={password:t.trim(),newPassword:r.trim(),country:a};P({url:"/api/auth/update-user",headers:{Authorization:"Baerer ".concat(this.props.token)},method:"POST",data:n}).then((function(){localStorage.setItem("country",a),e.setState({loading:!1,showModal:!0}),e.props.updateFlag(a),e.props.updateUserInfo({usercountry:a})})).catch((function(t){var r="Unidentified Error!";t.response&&(r=t.response.data.message),e.setState({hasError:!0,errorMessage:r,loading:!1})}))}},{key:"confirmHandler",value:function(){this.setState({showModal:!1}),this.props.history.push("/")}},{key:"componentDidMount",value:function(){var e=this;this.setState((function(t){var r=Object(i.a)({},t);return r.formControl.country.value=e.props.usercountry,r})),this.props.isAuth||this.props.history.push("/auth")}},{key:"componentDidUpdate",value:function(){this.props.isAuth||this.props.history.push("/")}},{key:"render",value:function(){var e=this,t=Object(j.jsx)(M.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}),r=this.state.formControl.newPassword,a=this.state.formControl.password;return Object(j.jsxs)("div",{children:[Object(j.jsxs)(Ee.a,{show:this.state.showModal,centered:!0,children:[Object(j.jsx)(Ee.a.Header,{children:Object(j.jsx)(Ee.a.Title,{children:"User Info"})}),Object(j.jsx)(Ee.a.Body,{children:"User info updated successfully!"}),Object(j.jsx)(Ee.a.Footer,{children:Object(j.jsx)(E.a,{variant:"success",onClick:function(){return e.confirmHandler()},children:"Okay"})})]}),Object(j.jsxs)("h1",{className:vt.a.greeting,children:["Hi ",this.props.username,", change your user information here."]}),Object(j.jsx)(T.a,{children:Object(j.jsx)(z.a,{lg:{span:4,offset:4},md:{span:6,offset:3},sm:{span:8,offset:2},xs:{span:10,offset:1},children:Object(j.jsxs)(I.a,{className:vt.a.authForm,children:[Object(j.jsx)(xe,{priorCountry:this.props.usercountry,onChangeHandler:function(t){return e.changeHandler(t,"country")}}),Object(j.jsx)(Oe,{label:"New Password",type:"password",isValid:r.touched&&r.isValid||!r.touched||""===r.value.trim(),onChangeHandler:function(t){return e.changeHandler(t,"newPassword")},currentValue:this.state.formControl.newPassword.value}),Object(j.jsx)(Oe,{label:"Current Password (required)",type:"password",isValid:a.touched&&a.isValid||!a.touched,onChangeHandler:function(t){return e.changeHandler(t,"password")},currentValue:this.state.formControl.password.value}),Object(j.jsxs)("div",{style:{textAlign:"center",marginTop:"20px"},children:[!this.state.formIsValid&&a.touched?Object(j.jsx)("p",{style:{color:"red"},children:"Password must have at least 5 characters."}):null,this.state.hasError?Object(j.jsx)("p",{style:{color:"red"},children:this.state.errorMessage}):null,Object(j.jsxs)(E.a,{disabled:!this.state.formIsValid||this.state.loading,onClick:function(){return e.submitHandler()},children:["Change Info",this.state.loading?" ... ":"",this.state.loading?t:null]})]})]})})})]})}}]),r}(a.Component),yt=Object(H.b)((function(e){return{isAuth:e.auth.isAuth,username:e.auth.username,usercountry:e.auth.usercountry,token:e.auth.token}}),(function(e){return{updateUserInfo:function(t){return e(function(e){return{type:J,updateData:e}}(t))},updateFlag:function(t){return e(he(t))}}}))(Object(ze.f)(xt)),Ct=function(){return Object(j.jsx)("div",{children:Object(j.jsx)("h1",{style:{color:"#fff",textAlign:"center",marginTop:"50px"},children:"404: Page not found"})})},_t=function(e){Object(l.a)(r,e);var t=Object(h.a)(r);function r(){var e;Object(c.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={showMobileNav:!1},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){this.tryAutoLogin()}},{key:"tryAutoLogin",value:function(){var e=this,t=localStorage.getItem("token"),r=new Date(parseInt(localStorage.getItem("expiresIn"))).getTime(),a=(new Date).getTime();if(t&&a<r){console.log("Autologin!");var n=r-a;console.log("".concat(n," ms remain.")),setTimeout((function(){return e.props.logout()}),n);var s=localStorage.getItem("username"),o=localStorage.getItem("country");this.props.login(s,o,t),this.props.getFlagResult(o)}}},{key:"toggleMobileNav",value:function(){this.setState((function(e){return Object(i.a)(Object(i.a)({},e),{},{showMobileNav:!e.showMobileNav})}))}},{key:"render",value:function(){var e=this;return Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)(v.a,{children:[Object(j.jsx)(k,{isAuth:this.props.isAuth,show:this.state.showMobileNav,authHandler:function(){return e.props.logout()},toggleMobileNav:function(){return e.toggleMobileNav()}}),Object(j.jsx)(N,{show:this.state.showMobileNav,onBackdropClick:function(){return e.toggleMobileNav()}}),Object(j.jsx)(S,{isAuth:this.props.isAuth,authHandler:function(){return e.props.logout()},toggleMobileNav:function(){return e.toggleMobileNav()}}),Object(j.jsx)(b,{children:Object(j.jsxs)(ze.c,{children:[Object(j.jsx)(ze.a,{path:"/",exact:!0,children:Object(j.jsx)(d.a,{fluid:!0,children:Object(j.jsx)(ge,{})})}),Object(j.jsx)(ze.a,{path:"/quiz",exact:!0,children:Object(j.jsx)(d.a,{fluid:!0,children:Object(j.jsx)(mt,{scrollUpRef:this.scrollUpRef})})}),Object(j.jsx)(ze.a,{path:"/user-info",exact:!0,children:Object(j.jsx)(d.a,{fluid:!0,children:Object(j.jsx)(yt,{})})}),Object(j.jsx)(ze.a,{path:"/auth",exact:!0,children:Object(j.jsx)(d.a,{fluid:!0,children:Object(j.jsx)(Te,{})})}),Object(j.jsx)(ze.a,{path:"/",children:Object(j.jsx)(d.a,{fluid:!0,children:Object(j.jsx)(Ct,{})})})]})})]})})}}]),r}(a.Component),St=Object(H.b)((function(e){return{isAuth:e.auth.isAuth}}),(function(e){return{logout:function(){return e(Ne())},login:function(t,r,a){return e(Ae(t,r,a))},getFlagResult:function(t){return e(he(t))}}}))(_t),wt=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,201)).then((function(t){var r=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,o=t.getTTFB;r(e),a(e),n(e),s(e),o(e)}))},At={name:"Vietnam",capital:"Hanoi",flagUrl:"http://res.cloudinary.com/vcloudinary/image/upload/v1632745330/m9qkepo2xbuhp5qi0bz1.gif",loading:!1,error:!1,errorMessage:""},kt=function(e){return Object(i.a)(Object(i.a)({},e),{},{loading:!0,error:!1})},Nt=function(e,t,r,a){return Object(i.a)(Object(i.a)({},e),{},{name:t,capital:r,flagUrl:a,loading:!1})},zt=function(e,t){return Object(i.a)(Object(i.a)({},e),{},{loading:!1,error:!0,errorMessage:t})};var It={isAuth:!1,username:"",usercountry:"",token:null,hasError:!1,errorMessage:"",loading:!1,authType:"login"},Tt=function(e){return Object(i.a)(Object(i.a)({},e),{},{hasError:!1,loading:!0})},Et=function(e,t){return Object(i.a)(Object(i.a)({},e),{},{hasError:!0,loading:!1,errorMessage:t})},Mt=function(e,t,r,a){return Object(i.a)(Object(i.a)({},e),{},{isAuth:!0,username:t,token:a,usercountry:r})},qt=function(e){return Object(i.a)(Object(i.a)({},e),{},{authType:"login"===e.authType?"signup":"login",hasError:!1})},Ut=function(e,t){var r=Object(i.a)({},e);for(var a in t)r[a]=t[a];return r};var Rt={quizzes:[],gameOn:!1,gamePause:!1,gameEnd:!1,lastResult:null,currentQuizIndex:-1,score:0,progressBar:0,loading:!1,screenHasError:!1,errorMessage:"",scoreSubmitted:!1,showCongratulation:!1,records:[],recordsLoading:!1,recordsHasError:!1,recordsErrorMessage:""},Bt=function(e){return Object(i.a)(Object(i.a)({},e),{},{loading:!0})},Ht=function(e,t){return Object(i.a)(Object(i.a)({},e),{},{loading:!1,screenHasError:!0,errorMessage:t})},Ft=function(e,t){return Object(i.a)(Object(i.a)({},e),{},{quizzes:t,currentQuizIndex:0,gamePause:!1,gameOn:!0,score:0,progressBar:0,loading:!1,screenHasError:!1,errorMessage:""})},Lt=function(e,t){!function(){for(var e=window.setTimeout((function(){}),0);e--;)clearTimeout(e)}(),function(){for(var e=window.setInterval((function(){}),2);e--;)clearTimeout(e)}();var r=t?e.score+1:e.score;return Object(i.a)(Object(i.a)({},e),{},{score:r,gamePause:!0,lastResult:t,progressBar:0})},Pt=function(e){var t=e.currentQuizIndex+1;return Object(i.a)(Object(i.a)({},e),{},{gamePause:!1,currentQuizIndex:t,lastResult:null,progressBar:0})},Qt=function(e){var t=(10*e.progressBar/100+.1)/10*100+.05;return Object(i.a)(Object(i.a)({},e),{},{progressBar:t>=100?100:t})},Dt=function(e){return Object(i.a)(Object(i.a)({},e),{},{loading:!1,scoreSubmitted:!0,screenHasError:!1,showCongratulation:!0})},Gt=function(e,t){return Object(i.a)(Object(i.a)({},e),{},{loading:!1,screenHasError:!0,errorMessage:t})},Vt=function(e){return Object(i.a)(Object(i.a)({},e),{},{showCongratulation:!1})},Zt=function(e){return Object(i.a)(Object(i.a)({},Rt),{},{records:e.records})},Wt=function(e){return Object(i.a)(Object(i.a)({},e),{},{recordsLoading:!0})},Kt=function(e,t){return Object(i.a)(Object(i.a)({},e),{},{recordsHasError:!1,recordsLoading:!1,records:t})},Yt=function(e,t){return Object(i.a)(Object(i.a)({},e),{},{recordsErrorMessage:t,recordsHasError:!0,recordsLoading:!1})};var Jt=r(75),Xt=r(120),$t=Object(Jt.b)({flagpedia:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q:return kt(e);case D:return Nt(e,t.name,t.capital,t.url);case G:return zt(e,t.message);default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W:return Tt(e);case Z:return Et(e,t.message);case V:return Mt(e,t.username,t.country,t.token);case Y:return qt(e);case J:return Ut(e,t.updateData);case K:return It;default:return e}},flagquiz:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te:return Ft(e,t.quizzes);case ne:return Bt(e);case $:return Ht(e,t.message);case ee:return Lt(e,t.result);case re:return Pt(e);case ae:return Qt(e);case se:return Dt(e);case oe:return Gt(e,t.message);case ie:return Vt(e);case le:return Wt(e);case ce:return Kt(e,t.records);case ue:return Yt(e,t.message);case X:return Zt(e);default:return e}}}),er=Object(Jt.c)($t,Object(Jt.a)(Xt.a));o.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(H.a,{store:er,children:Object(j.jsx)(St,{})})}),document.getElementById("root")),wt()},21:function(e,t,r){e.exports={navLink:"Navigation_navLink__2U8pw",activeNavLink:"Navigation_activeNavLink__1M6Zj",mobileNavBtn:"Navigation_mobileNavBtn__o-9zd",navButtons:"Navigation_navButtons__1hh_b"}},43:function(e,t,r){e.exports={hallOfFame:"halloffame_hallOfFame__25Si-",record:"halloffame_record__16tan",recordDetail:"halloffame_recordDetail__2of9-",nameSpan:"halloffame_nameSpan__3pAvA",scoreSpan:"halloffame_scoreSpan__3b5me"}},58:function(e,t,r){e.exports={greeting:"authPage_greeting__yQnf4",authForm:"authPage_authForm__2kKFI",btnCol:"authPage_btnCol__3xAZu",errCol:"authPage_errCol__akDlA"}},71:function(e,t,r){e.exports={mobileNav:"mobileNavigation_mobileNav__171XB",navBtn:"mobileNavigation_navBtn__1SQtm",activeNavBtn:"mobileNavigation_activeNavBtn__3Oogq"}},72:function(e,t,r){e.exports={flagsForm:"flagpedia_flagsForm__9cDti",errorCol:"flagpedia_errorCol__9XPP2",greeting:"flagpedia_greeting__fdKlz"}},73:function(e,t,r){e.exports={quizQuestion:"quizScreen_quizQuestion__1UdCO",questionImg:"quizScreen_questionImg__3H67f",progressBar:"quizScreen_progressBar__2R5FX"}},74:function(e,t,r){e.exports={gameSection:"gameSection_gameSection__1yenm",alignWrapper:"gameSection_alignWrapper__3bb7n"}},86:function(e,t,r){e.exports={greeting:"settingPage_greeting__2bKL8",authForm:"settingPage_authForm__2YhGc"}}},[[189,1,2]]]);
//# sourceMappingURL=main.7f430b29.chunk.js.map